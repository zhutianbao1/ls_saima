<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>有价卡外流风险专题</title>
<script    src="__STATIC__/jquery-1.8.3.min.js"></script>
<script    src="__STATIC__/highcharts.js"></script>  
<script    src="__STATIC__/layer/layer.js"></script> 
<style type="text/css"> 
*{margin:0;padding:0;list-style-type:none;}
ul , li {list-style: none;list-style-type: none;}
a, img{border:0;}
body{font:12px/180%;
  font-family: 'Microsoft Yahei','Segoe UI_', 'Open Sans', Verdana, Arial, Helvetica, sans-serif;
  font-weight: bold;
  color: #000000;
  font-size: 1.6rem;
  line-height: 1.6rem;
  letter-spacing: 0.02em;
  background: url('__PUBLIC__/images/shuangxie.jpg');
} 
.container{width: 1000px;margin: 0 auto;
}
h3{width: 180px;height: 30px;line-height: 30px;margin: 20px auto;
   letter-spacing: 1px;color: #666;
}
.left{width: 499px;height: 400px;border: 1px solid #eee; float: left;
}
.right{width: 498px;height: 400px;border: 1px solid #eee;float: left;
  border-left: none;
}

.clear{clear: both;
}
h4{ text-align: center;margin-top: 10px; letter-spacing: 1px; color: #666;
}
.totle_wai{max-width: 490px; max-height: 400px; border:0px solid red;
}

.totle_pre{max-width: 490px;max-height: 400px; border:0px solid red;
}
.center{width: 100%;height: 400px;border:1px solid #eee;
}
.totle_qud{max-width: 990px;max-height: 400px;border:0px solid red;margin: 0 auto;
}
.foot,.foot2{width: 100%;height: 400px;border:1px solid #eee;
}

.totle_yew,.totle_yew2{max-width: 990px;max-height: 400px;border:0px solid red;
    margin: 0 auto;
}
.floor{width: 1000px;margin: 10px auto; height: 30px;line-height: 30px;
    color: #666;letter-spacing: 1px;position: absolute;
}
.floor-left{width: 315px;height: 30px;line-height: 30px;margin: 0 auto;
}
.floor-right{width: 70px;height: 30px;line-height: 30px;    
    position: relative;left: 900px;top: -30px;
}
.floor-right>a{ display: block;list-style-type: none; text-decoration: none;
    color: #666;letter-spacing: 1px;
}
.floor-right>a:hover{color: #333;
}

.notice{
    border:0px solid red;
    text-align: right;
    height: 30px;
    line-height: 30px;
    letter-spacing: 1px;
    color: #666;
    margin-top: 20px;
}

</style>
</head> 
<body>
  <div class="container">
    <h3>有价卡外流风险专题</h3> 
    <div class="left">
      <!--
      <h4>疑似外流金额汇总</h4>
      -->
      <div id="totle_wai" class="totle_wai">
        
      </div>
    
    </div>

    <div class="right">
      <!--
      <h4>县市外流占比</h4> 
      -->
       <div id="totle_pre" class="totle_pre">        
       </div>
    </div>

    <div class="clear"></div>
    <div class="center">
        <div id="totle_qud" class="totle_qud">
            
        </div>
    </div>

    <div class="foot">
        <div id="totle_yew" class="totle_yew">
            
        </div>
    </div>

    <div class="foot2">
        <div id="totle_yew2" class="totle_yew2">
            
        </div>
    </div>

    <div class="notice">
    详情,请登录85平台-市场部报表-渠道运营-"有价卡充值情况清单"查看具体清单&nbsp;&nbsp;&nbsp;&nbsp;

    </div>
    
    <div class="floor">
        <div class="floor-left">技术支持-丽水移动分公司(业务支撑中心)</div>
        <!--
        <div class="floor-right"><a href="#">外流详情</a></div>  
        -->  
    </div>

   
  </div>
</body>


<script language="javascript" >
 $(function(){
    Highcharts.chart('totle_wai', {
    chart: {
        type: 'bar'
    },
    title: {
        text: '疑似外流金额汇总',
        style:{
            "color": "#666", "fontSize": "18px" 
        }
    },    
    xAxis: {
        categories: [<?php 
                    $x_num='';
                    for ($i=0; $i <count($lists); $i++) { 
                        if($i==count($lists)-1){                            
                            $x_num .='"'.$lists[$i]['COUNTY_NAME'].'"';
                        }else{                           
                            $x_num .='"'.$lists[$i]['COUNTY_NAME'].'",';
                        }
                    }
                    echo $x_num;
            ?>],
            labels: {              
                style: {
                    fontSize: '13px',
                    fontFamily: 'Verdana, sans-serif',
                    color:'#666',
                    fontWeight:'700'
                }
            }       
    },    
    yAxis: {
        min: 0,
        title: {
            text: '&yen',
            align: 'high'
        },
        labels: {           
            style: {
                    fontSize: '11px',
                    fontFamily: 'Verdana, sans-serif',
                    color:'#666'
                }
        }
    },   
    tooltip: {
        valueSuffix: '&yen'
    },    
    plotOptions: {
        bar: {
            dataLabels: {
                enabled: true,
                style:{
                    "color": "#666", "fontSize": "11px", "fontWeight": "bold"
                }
            }
        }
    },   
    legend: {
        layout: 'vertical',
        align: 'right',
        verticalAlign: 'top',
        x: -10,
        y: 10,
        floating: true,
       // borderWidth: 1,
        backgroundColor: ((Highcharts.theme && Highcharts.theme.legendBackgroundColor) || '#FFFFFF'),
        shadow: true
    },   
    credits: {
        enabled: false
    },
    series: [{
        name: '<a style="color:#666;">金额(元)</a>',
        data: [
        <?php 
            $y_num='';
            for ($i=0; $i <count($lists); $i++) { 
                if($i==count($lists)-1){                   
                    $y_num .=$lists[$i]['TOTLE_WAI'];                                                      
                }else{                   
                    $y_num .= $lists[$i]['TOTLE_WAI'].','; 
                }
            }
            echo $y_num;
            ?>
        ]
    }
    ]
});



Highcharts.chart('totle_pre', {
    chart: {
        type: 'column'
    },
    title: {
        text: '县市外流占比',
        style:{
            "color": "#666", "fontSize": "18px" 
        }
    },   
    xAxis: {
        categories: [
        <?php 
            $county_name='';
            for ($i=0; $i <count($lista); $i++) { 
                if($i==count($lista)-1){                   
                    $county_name .='"'.$lista[$i]['COUNTY_NAME'].'"';
                }else{                    
                     $county_name .='"'.$lista[$i]['COUNTY_NAME'].'",';
                }
            }
            echo $county_name;
            ?>            
        ],
        crosshair: true,
        labels:{
            style:{ "color": "#666","fontSize": "13px" }
        }
    },
    yAxis: {
        min: 0,
        title: {           
            text: '%'
        },
        labels: {           
            style: {
                    fontSize: '11px',
                    fontFamily: 'Verdana, sans-serif',
                    color:'#666'
                }
        }
    },
    tooltip: {
        headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
        pointFormat: '<tr><td style="color:#666;padding:0">百分比:</td>' +
            '<td style="padding:0"><b>{point.y:.2f} %</b></td></tr>',
        footerFormat: '</table>',
        shared: true,
        useHTML: true
    },
    
    plotOptions: {
        column: {
            pointPadding: 0.2,
            borderWidth: 0,
            dataLabels: {
                enabled: true,
                style:{
                    "color": "#666", "fontSize": "11px", "fontWeight": "bold"
                }
                //rotation: 0,
                //color: '#666',
                //align: 'left',
            }
        }
    },
    legend: {
        layout: 'vertical',
        align: 'right',
        verticalAlign: 'top',
        x: -10,
        y: 10,
        floating: true,
       // borderWidth: 1,
        backgroundColor: ((Highcharts.theme && Highcharts.theme.legendBackgroundColor) || '#FFFFFF'),
        shadow: true
    },   
    
    series: [{
        name: '<a style="color:#666;">百分比(%)</a>',
        data: [
        <?php 
            $totle_pre='';
            for ($i=0; $i <count($lista); $i++) { 
                if($i==count($lista)-1){                      
                    $totle_pre .=$lista[$i]['TOTLE_PRE'];
                }else{                   
                    $totle_pre .= $lista[$i]['TOTLE_PRE'].',';
                }
            }
            echo $totle_pre;
            ?>
        ]
    }
    ]
});





    $('#totle_qud').highcharts({
        chart: {
            type: 'column'
        },
        title: {
            text: '高危渠道',
            style:{
            "color": "#666", "fontSize": "18px" 
        }
        },
        subtitle: {
            text: '外流金额三万以上渠道占比',
            style:{
            "color": "#666", "fontSize": "13px" 
        }
        },
        xAxis: {
            type: 'category',
            labels: {
                rotation: -45,
                style: {
                    fontSize: '13px',
                    //fontFamily: 'Verdana, sans-serif',
                    color:'#666',
                    fontWeight:'400'
                }
            }
        },
        yAxis: {
            min: 0,
            title: {
                text: '<a style="color:#666;">2017年</a>'
            },
            labels: {
               // rotation: -45,
                style: {
                    fontSize: '13px',
                    //fontFamily: 'Verdana, sans-serif',
                    color:'#666',
                    fontWeight:'700'
                }
            }
        },
        legend: {
            layout: 'vertical',
            align: 'right',
            verticalAlign: 'top',
            x: -10,
            y: 10,
            floating: true,
           // borderWidth: 1,
            backgroundColor: ((Highcharts.theme && Highcharts.theme.legendBackgroundColor) || '#FFFFFF'),
            shadow: true
        },   
        tooltip: {
            pointFormat: '<b style="color:#666;">百分比:{point.y:.2f}%</b>'
        },
        series: [{
            name: '<a style="color:#666;">百分比(%)</a>',
            data: [
            <?php 
             $data='';
              for ($i=0; $i <count($listg); $i++) { 
                if($i==count($listg)-1){
                    $data .= '["'.$listg[$i]['ORG_NAME1用户信息'].'",';
                    $data .= $listg[$i]['QUD_PRE'].']';
                }else{ 
                    $data .= '["'.$listg[$i]['ORG_NAME1用户信息'].'",';
                    $data .= $listg[$i]['QUD_PRE'].'],';
                }
            }
            echo $data;
             ?>
            ],
            dataLabels: {
                enabled: true,
                rotation: -90,
                color: '#666',
                align: 'left',
                format: '{point.y:.2f}', // one decimal
                y: -5, // 10 pixels down from the top
                style: {
                    fontSize: '11px',
                    fontFamily: 'Verdana, sans-serif'
                }
            }
        }]
    });



 Highcharts.chart('totle_yew', {
    chart: {
        type: 'bar'
    },
    title: {
        text: '业务危险分析',
        style:{
            "color": "#666", "fontSize": "18px" 
        }
    },
    subtitle: {
            text: '外流金额三万以上的业务',
            style:{
            "color": "#666", "fontSize": "13px" 
        } 
      },       
    xAxis: {
        categories: [<?php 
                    $x_num='';
                    for ($i=0; $i <count($listy); $i++) { 
                        if($i==count($listy)-1){
                            $x_num .='"'.$listy[$i]['BUSI_NAME'].'"';                        
                        }else{                           
                            $x_num .= '"'.$listy[$i]['BUSI_NAME'].'",';
                        }
                    }
                    echo $x_num;
            ?>],
            labels: {
                //rotation: -45,
                style: {
                    fontSize: '12px',
                    //fontFamily: 'Verdana, sans-serif',
                    color:'#666',
                    fontWeight:'800'
                }
            }       
    },    
    yAxis: {
        min: 0,
        title: {
            text: 'Population (millions)',
            align: 'high'
        },
        labels: {          
           style: {
                    fontSize: '13px',
                    //fontFamily: 'Verdana, sans-serif',
                    color:'#666',
                    fontWeight:'800'
                }
        }
    },   
    tooltip: {
        valueSuffix: '&yen'
    },    
    plotOptions: {
        bar: {
            dataLabels: {
                enabled: true,
                style:{
                    "color": "#666", "fontSize": "11px", "fontWeight": "bold"
                },
                align: "left"
            }
        }
    },   
    legend: {
        layout: 'vertical',
        align: 'right',
        verticalAlign: 'top',
        x: -10,
        y: 10,
        floating: true,      
        backgroundColor: ((Highcharts.theme && Highcharts.theme.legendBackgroundColor) || '#FFFFFF'),
        shadow: true
    },    
    credits: {
        enabled: false
    },
    series: [{
        name: '<a style="color:#666;">金额(元)</a>',
        data: [
        <?php 
            $y_num='';
            for ($i=0; $i <count($listy); $i++) { 
                if($i==count($listy)-1){                   
                    $y_num .=$listy[$i]['TOTLE_WAI'];                        
                }else{                   
                    $y_num .= $listy[$i]['TOTLE_WAI'].',';
                }
            }
            echo $y_num;
        ?>
        ]
    }
    ]
});



 $('#totle_yew2').highcharts({
        chart: {
            type: 'column'
        },
        title: {
            text: '业务危险分析2',
            style:{
            "color": "#666", "fontSize": "18px" 
        }
        },
        subtitle: {
            text: '外流金额三万以上业务占比',
            style:{
            "color": "#666", "fontSize": "13px" 
        }
        },
        xAxis: {
            type: 'category',
            labels: {
                rotation: -45,
                style: {
                    fontSize: '13px',
                    //fontFamily: 'Verdana, sans-serif',
                    color:'#666',
                    fontWeight:'400'
                }
            }
        },
        yAxis: {
            min: 0,
            title: {
                text: '<a style="color:#666;">2017年</a>'
            },
            labels: {
               // rotation: -45,
                style: {
                    fontSize: '13px',
                    //fontFamily: 'Verdana, sans-serif',
                    color:'#666',
                    fontWeight:'700'
                }
            }
        },
        legend: {
            layout: 'vertical',
            align: 'right',
            verticalAlign: 'top',
            x: -10,
            y: 10,
            floating: true,
           // borderWidth: 1,
            backgroundColor: ((Highcharts.theme && Highcharts.theme.legendBackgroundColor) || '#FFFFFF'),
            shadow: true
        },   
        tooltip: {
            pointFormat: '<b style="color:#666;">百分比:{point.y:.2f}%</b>'
        },
        series: [{
            name: '<a style="color:#666;">百分比(%)</a>',
            data: [
            <?php 
             $data='';
              for ($i=0; $i <count($listy2); $i++) { 
                if($i==count($listy2)-1){ 
                    $data .= '["'.$listy2[$i]['BUSI_NAME'].'",';
                    $data .= $listy2[$i]['YEW_PRE'].']';                   
                }else{ 
                    $data .= '["'.$listy2[$i]['BUSI_NAME'].'",';
                    $data .= $listy2[$i]['YEW_PRE'].'],';
                }
            }
            echo $data;
             ?>
            ],
            dataLabels: {
                enabled: true,
                rotation: 0,
                color: '#666',
                align: 'left',
                format: '{point.y:.2f}', // one decimal
                y: 1, // 10 pixels down from the top
                style: {
                    fontSize: '11px',
                    fontFamily: 'Verdana, sans-serif'
                }
            }
        }]
    });
    

 });
</script>
</html>

